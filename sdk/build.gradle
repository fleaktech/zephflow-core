plugins {
  id 'com.gradleup.shadow' version '8.3.3'
  id 'java'
  id 'java-library'
}

dependencies {
  api project(":runner")

  testImplementation group: 'software.amazon.awssdk', name: 's3', version: awsVersion
  testImplementation group: 'software.amazon.awssdk', name: 'kinesis', version: awsVersion
  testImplementation group: 'org.apache.kafka', name: 'kafka-clients', version: kafkaVersion

}

tasks.named('test') {
  useJUnitPlatform()
  testLogging.showStandardStreams = true
}

shadowJar {
  zip64 true
  enabled = false  // Disable by default
}

// Create a custom task to build the shadow JAR
task buildFatJar(type: com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar) {
  from sourceSets.main.output
  configurations = [project.configurations.runtimeClasspath]
  archiveClassifier = 'all'
  zip64 = true
}